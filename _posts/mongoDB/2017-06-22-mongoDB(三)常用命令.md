---
layout: post
title: "mongoDB(三)常用命令"
categories: [mongoDB，命令]
description: mongoDB常用命令
keywords: mongoDB
---

## mongoDB常用命令

### 创建数据库
1、创建test库
```json
use test
```
2、显示数据列表
```json
show dbs
```
_注：执行完上述步骤你会发现列表中并没有显示test库,那是因为use只是转到指定的数据库，此时并没有做任何操作，所以并不会创建相应的数据库，只有你真正操作了该数据库，数据库才会自动创建成功。_

如下图所示：
![创建](https://raw.githubusercontent.com/xiaohe9569/xiaohe9569.github.io/master/images/20170623103927.png)

### 删除
1、指到相应数据库
```json
>use yang
switched to db yang
```
2、删除数据库
```json
db.dropDatabase()
```
3、删除集合
```json
>show tables
yang
>db.yang.drop()
true
>show tables
>
```
如图所示：
![删除](https://raw.githubusercontent.com/xiaohe9569/xiaohe9569.github.io/master/images/20170623104942.png)

### 新增
```json
> db.yang.insert( {
 "name": "消息中心",
 "chaildNodes": [],
 "pid": 6005,
 "id": 6050,
 "sid": "rts0503"})
WriteResult({ "nInserted" : 1 })

或者：

>document=({
 "name": "消息中心",
 "chaildNodes": [],
 "pid": 6005,
 "id": 6050,
 "sid": "rts0503"});

>db.yang.insert(document)               
WriteResult({ "nInserted" : 1 })
```
### 修改([参考](http://www.runoob.com/mongodb/mongodb-update.html))
1、修改
```json
#只修改第一条发现的文档
> db.yang.update({"name":"消息"},{$set:{"name":"消息更新"}})
WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })

#修改多条
> db.yang.update({"name":"消息"},{$set:{"name":"消息更新"}},{multi:true})
WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
```
2、文档替换
save()通过传入文档来替换已有文档

语法格式：
```json
db.collection.save(
   <document>,
   {
     writeConcern: <document>
   }
)
#document : 文档数据。
#writeConcern :可选，抛出异常的级别。
```
实例：
```json
> db.yang.save({"_id":ObjectId("594cc8e954e98360a3262dfd"),"name":"替换文档"})
WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })

> db.yang.find()
{ "_id" : ObjectId("594cb38354e98360a3262dfb"), "name" : "消息中心", "chaildNodes" : [ ], "pid" : 6005, "id" : 6050, "sid" : "rts0503" }
{ "_id" : ObjectId("594cb5b654e98360a3262dfc"), "name" : "消息更新", "chaildNodes" : [ ], "pid" : 6005, "id" : 6050, "sid" : "rts0503" }
{ "_id" : ObjectId("594cc8e954e98360a3262dfd"), "name" : "替换文档" }
```
### 删除
语法格式
```json
db.collection.remove(
   <query>,
   {
     justOne: <boolean>,
     writeConcern: <document>
   }
)

#query :（可选）删除的文档的条件。
#justOne : （可选）如果设为 true 或 1，则只删除一个文档。
#writeConcern :（可选）抛出异常的级别。
```
实例
```json
#删除找到的第一条数据
> db.yang.remove({"name":"替换文档"},{justOne:true})
WriteResult({ "nRemoved" : 1 })
#或者
> db.yang.remove({"name":"消息更新"},1)
WriteResult({ "nRemoved" : 1 })
```
### 查询
